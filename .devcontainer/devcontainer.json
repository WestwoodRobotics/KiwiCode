{
	"name": "WPILib",
	"build": {
		"dockerfile": "Dockerfile"
	},

	"overrideCommand": false,
	"privileged": true,
	"mounts": [
		{
			"source": "vscode-dev",
			"target": "/vscode-dev",
			"type": "volume"
		}
	],
	"customizations": {
		"vscode": {
			"settings": {
				"resmon.show.battery": false,
				"resmon.show.cpufreq": false
			},
			"extensions": [
				"dbaeumer.vscode-eslint",
				"EditorConfig.EditorConfig",
				"GitHub.vscode-pull-request-github",
				"ms-vscode.vscode-github-issue-notebooks",
				"ms-vscode.vscode-selfhost-test-provider",
				"mutantdino.resourcemonitor"
			]
		}
	},
	"hostRequirements": {
		"memory": "9gb"
	},
	"postCreateCommand": "YEAR=$(echo $URL | grep -oP 'v\\K[0-9]{4}') && VERSION=$(echo $URL | grep -oP 'v[0-9]{4}\\.\\K[0-9]+\\.[0-9]+') && cd $YEAR && mv ../WPILib_Linux-$VERSION/WPILib_Linux-$VERSION-artifacts.tar.gz . && tar xf WPILib_Linux-$VERSION-artifacts.tar.gz && rm WPILib_Linux-$VERSION-artifacts.tar.gz && cd .. && mkdir -p ~/wpilib && mv $YEAR ~/wpilib && rm -rf WPILib_Linux-* && cd ~/wpilib/$YEAR/tools/ && python3 ToolsUpdater.py && cd ~/wpilib/$YEAR/vsCodeExtensions && find . -name \"*.vsix\" | xargs -I {} code --install-extension {}"
}
